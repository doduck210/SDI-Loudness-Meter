<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SDI Audio Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack.min.css">
    <link rel="stylesheet" href="dashboard.css">
</head>

<body class="controls-collapsed">
    <header>
        <div class="header-info">
            <h1>ducky's Ch Sixth Sense — Dashboard</h1>
            <div class="layout-actions">
                <span>레이아웃을 파일로 저장하거나 다시 불러올 수 있습니다.</span>
                <div class="layout-actions-buttons">
                    <button type="button" id="exportLayoutBtn">레이아웃 저장</button>
                    <button type="button" id="importLayoutBtn">레이아웃 불러오기</button>
                    <input type="file" id="importLayoutInput" accept="application/json" hidden>
                </div>
            </div>
        </div>
        <div class="header-actions">
            <div class="channel-settings">
                <button type="button" id="channelSettingsToggle" aria-expanded="false"
                    aria-controls="channelSettingsPanel">⚙️ 채널</button>
                <div id="channelSettingsPanel" class="channel-settings-panel" aria-hidden="true">
                    <div class="channel-settings-row meter-grid">
                        <span class="channel-meter-label">채널 입력 레벨</span>
                        <div class="channel-meters" id="channelSettingsMeters"></div>
                    </div>
                    <div class="channel-settings-row">
                        <label for="channelSettingLeft">Left</label>
                        <select id="channelSettingLeft"></select>
                    </div>
                    <div class="channel-settings-row">
                        <label for="channelSettingRight">Right</label>
                        <select id="channelSettingRight"></select>
                    </div>
                    <button type="button" id="channelSettingsSave">저장</button>
                    <div class="channel-settings-row channel-signal-info">
                        <span>현재 비디오 포맷</span>
                        <span id="channelVideoInfo" style="color: var(--text);">-</span>
                    </div>
                </div>
            </div>
            <div class="channel-settings">
                <button type="button" id="widgetSettingsToggle" aria-expanded="false"
                    aria-controls="widgetSettingsPanel">🎛️ 위젯</button>
                <div id="widgetSettingsPanel" class="channel-settings-panel" aria-hidden="true">
                    <div class="widget-settings-nav">
                        <button type="button" class="widget-settings-tab active" data-target="widgetSettingsVectorscope">Audio Vectorscope</button>
                        <!-- 앞으로 다른 위젯 추가 시 탭을 늘리면 됩니다 -->
                    </div>
                    <div id="widgetSettingsVectorscope" class="widget-settings-section">
                        <div class="channel-settings-row">
                            <label for="vsDotSize">점 크기 <span id="vsDotSizeValue" style="color:#9fb4c7;">1.0</span></label>
                            <input type="range" id="vsDotSize" min="0.5" max="4" step="0.1" value="1">
                        </div>
                        <div class="channel-settings-row">
                            <label for="vsFadeAlpha">잔상 <span id="vsFadeAlphaValue" style="color:#9fb4c7;">0.15</span></label>
                            <input type="range" id="vsFadeAlpha" min="0.05" max="0.3" step="0.01" value="0.15">
                        </div>
                        <div class="channel-settings-row">
                            <label for="vsAmp">스케일 <span id="vsAmpValue" style="color:#9fb4c7;">3.0</span></label>
                            <input type="range" id="vsAmp" min="1" max="6" step="0.1" value="3">
                        </div>
                        <div class="channel-settings-row">
                            <label for="vsColor">색상 <span id="vsColorValue" style="color:#9fb4c7;">#45f7aa</span></label>
                            <input type="color" id="vsColor" value="#45f7aa">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <main>
        <section class="dashboard-surface">
            <div id="emptyState" class="empty-hint">
                위젯을 추가해 나만의 화면을 구성하세요.
            </div>
            <div class="grid-stack" id="dashboardGrid"></div>
        </section>
    </main>
    <section class="control-panel" id="controlPanel" aria-hidden="true">
        <h2>위젯 추가</h2>
        <select id="widgetSelect">
            <option value="">위젯을 선택하세요</option>
        </select>
        <button id="addWidgetBtn" disabled>위젯 추가</button>
        <hr style="width:100%; border: none; border-top: 1px solid var(--panel-border); opacity: 0.4; margin: 8px 0;">
        <button id="resetLayoutBtn" class="danger">레이아웃 초기화</button>
    </section>
    <button id="controlToggle" class="floating-toggle" aria-expanded="false" aria-controls="controlPanel"
        aria-label="위젯 메뉴 열기">
        ＋
    </button>
    <button id="fullscreenToggle" class="floating-fullscreen" aria-pressed="false" aria-label="전체화면 전환">
        ⤢
    </button>

    <script src="https://cdn.jsdelivr.net/npm/gridstack@10.1.2/dist/gridstack-all.min.js"></script>
    <script src="dashboard.js"></script>
</body>

</html>
